<!DOCTYPE html>
<html>
<head>
    <a href="/home">Go Home</a><br>

</head>
<body>
<div style="display:inline-table">
{% with messages = get_flashed_messages() %}
   {% if messages %}
      {% for message in messages %}
         {{ message }}
      {% endfor %}
   {% endif %}
{% endwith %}

{% if error %}
      <p><strong>Error:</strong> {{ error }}
{% endif %}

<h2>Deferred Reports:</h2>
	<table border=1>
	<th>Data/Time Submitted</th>
	<th>Report Name</th>
	<th>Description</th>	
    <th>Status</th>
    <th>Action</th>

    
	{% for name, item_dict in deferred_items %}
		<tr>
			<td>{{item_dict.creation_time}}</td>
			<td>{{item_dict.report_name}}</td>
			<td>{{item_dict.desc}}</td>
			<td>{{item_dict.status}}</td>
            <td>
                {% if item_dict.status=='CTH_DEFER_READY' %}
                    <form method="post" action="update_tag" class="inline" target="report_frame">
                        <input type="hidden" name="name" value="{{name}}" /> 
                        <button type="submit" name="accept_tag" value="true" class="link-button">
                        Save Item
                        </button>
                    </form>
                    <form method="post" action="get_deferred_report" class="inline" target="report_frame">
                            <button type="submit" name="ticket_name" id="ticket_name" value="{{name}}" class="link-button">View Item</button>
                    </form>
                
                {% endif %}
			
            </td>
            
				
		</tr>
	{% endfor %}
	</table>
	<br>
</div>
<div style="display:inline-block">
<p>Note: Reports will show up in the frame below.</p>
    <iframe name="report_frame" style="position: absolute; height: 80%; width: 50% ">Report Appears Here</iframe>
</div>



</body>
</html>